<form class="flex flex-col gap-4" (ngSubmit)="onSubmit()">
  @if (versionConflict) {
    <div class="bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded relative mb-2" role="alert">
      <strong class="font-bold">Warning:</strong>
      <br />
      <span class="block sm:inline">This task was updated elsewhere. Please review the latest changes before saving again.</span>
    </div>
  }
  <div>
    <label class="block text-sm font-medium mb-1">Title</label>
    <input
      class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary"
      [(ngModel)]="form.title"
      name="title"
      required
    />
  </div>
  <div>
    <label class="block text-sm font-medium mb-1">Description</label>
    <textarea
      class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary"
      [(ngModel)]="form.description"
      name="description"
      required
    ></textarea>
  </div>
  <div class="flex gap-4">
    <div>
      <label class="block text-sm font-medium mb-1">Status</label>
      <select
        class="w-full px-3 py-2 border rounded"
        [(ngModel)]="form.status"
        name="status"
        required
      >
        <option value="TO_DO">To Do</option>
        <option value="IN_PROGRESS">In Progress</option>
        <option value="DONE">Done</option>
      </select>
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Priority</label>
      <select
        class="w-full px-3 py-2 border rounded"
        [(ngModel)]="form.priority"
        name="priority"
        required
      >
        <option value="LOW">Low</option>
        <option value="MED">Medium</option>
        <option value="HIGH">High</option>
      </select>
    </div>
  </div>
  <div class="flex justify-end gap-2 mt-4">
    <button
      type="button"
      class="px-4 py-2 rounded bg-gray-200 text-gray-700 hover:bg-gray-300"
      (click)="onCancel()"
    >
      Cancel
    </button>
    @if (task) {
      <button
        type="button"
        class="px-4 py-2 rounded bg-red-500 text-white hover:bg-red-700"
        (click)="onDelete()"
      >
        Delete
      </button>
    }
    <button
      type="submit"
      class="px-4 py-2 rounded bg-primary text-white hover:bg-indigo-700"
    >
      {{ submitLabel }}
    </button>
  </div>
</form>