<div class="rounded-lg bg-bg-secondary p-2 shadow-sm flex flex-col h-full">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-2">
      <div
        class="rounded-full"
        style="width: 8px; height: 8px;"
        [ngClass]="{
          'bg-primary': progressionType === 'TO_DO',
          'bg-warning': progressionType === 'IN_PROGRESS',
          'bg-completed': progressionType === 'DONE'
        }"
      ></div>
      <h2 class="text-xl font-semibold">
        {{ columnTitle }}
        <span class="text-text-secondary font-normal">({{ totalElements() }})</span>
      </h2>
    </div>
    <button
      class="w-8 h-8 flex items-center justify-center rounded-full bg-bg-primary hover:bg-bg-secondary transition-colors border border-gray-300"
      (click)="onAddTaskClick()">
      <span class="material-symbols-outlined">add</span>
    </button>
  </div>
  <div class="flex flex-col gap-3 flex-1">
    @if (!loading()) {
    @if (tasks().length > 0) {
    @for (task of tasks(); track task.id) {
    <app-task-column-card [task]="task" (cardClick)="onEditTaskClick($event)" class="m-1"/>
    }
    } @else {
    <div class="text-center text-text-secondary py-4">No tasks</div>
    }
    } @else {
    <div class="text-center text-text-secondary py-4">Loading...</div>
    }
  </div>
  <div class="flex items-center justify-center gap-2 mt-4">
    <button
      class="px-3 pt-1 pb-0 rounded bg-primary text-white disabled:bg-gray-300 hover:bg-indigo-700 transition-colors"
      (click)="prevPage()" [disabled]="first()">
      <span class="material-symbols-outlined">chevron_left</span>
    </button>
    <span class="mx-2">{{ page() + 1 }} / {{ totalPages() }}</span>
    <button
      class="px-3 pt-1 pb-0 rounded bg-primary text-white disabled:bg-gray-300 hover:bg-indigo-700 transition-colors"
      (click)="nextPage()" [disabled]="last()">
      <span class="material-symbols-outlined">chevron_right</span>
    </button>
  </div>
</div>